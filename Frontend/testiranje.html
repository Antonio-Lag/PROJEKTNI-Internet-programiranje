<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style_log_reg.css">
    <script src="https://cdn.jsdelivr.net/npm/vue@2"></script>
</head>
<body>
    <nav>
        <a href="Login.html">Login</a>
        <a href="Home.html">Home page</a>
    </nav>
    <div class="w3-container w3-cyan">
        <h1>Virtual movie shop</h1> 
    </div>
    
    <div id="app" class="w3-container">
        <div class="w3-container w3-blue">
            Register your account:
        </div>
        <label class="w3-text-blue">Name:</label>
        <input type="text" v-model="name" class="w3-input w3-border">

        <label class="w3-text-blue">Last Name:</label>
        <input type="text" v-model="surname" class="w3-input w3-border">

        <label class="w3-text-blue">User  Name:</label>
        <input type="text" v-model="userid" class="w3-input w3-border">

        <label class="w3-text-blue">Password:</label>
        <input type="password" v-model="password" class="w3-input w3-border">

        <label class="w3-text-blue">Confirm Password:</label>
        <input type="password" v-model="passwordcheck" class="w3-input w3-border">
        <br>
        <br>
        <button class="w3-btn w3-blue" @click="register">Register</button>
        <div id="data">{{ message }}</div>
    </div>

    <div class="w3-container w3-cyan">
        <footer>Telematika 2024/25 | <span id="current-date"></span></footer>
    </div>

    <script>
        new Vue({
            el: '#app',
            data: {
                name: '',
                surname: '',
                userid: '',
                password: '',
                passwordcheck: '',
                message: ''
            },
            methods: {
                register() {
                    if (this.name === '' || this.surname === '' || this.userid === '' || this.password === '' || this.passwordcheck === '') {
                        this.message = "Please check your registration information!";
                        return;
                    }

                    if (this.password !== this.passwordcheck) {
                        this.message = "Passwords do not match!";
                        return;
                    }

                    // Here you would typically send the data to your server
                    const userData = {
                        name: this.name,
                        surname: this.surname,
                        userid: this.userid,
                        password: this.password
                    };

                    // Example of sending data to a server using fetch
                    fetch('YOUR_API_ENDPOINT', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(userData)
                    })
                    .then(response => response.json())
                    .then(data => {
                        this.message = "Registration successful!";
                        // Optionally reset the form
                        this.resetForm();
                    })
                    .catch(error => {
                        console.error('Error:', error);
                        this.message = "Registration failed!";
                    });
                },
                resetForm() {
                    this.name = '';
                    this.surname = '';
                    this.userid = '';
                    this.password = '';
                    this.passwordcheck = '';
                }
            }
        });

        function Date_print(){
            const date = new Date();
            const options = { day: '2-digit', month: '2-digit', year: 'numeric' };
            const formattedDate = date.toLocaleDateString('en-GB', options);
            document.getElementById("current-date").innerHTML = formattedDate; 
        }
        
        window.onload = function() {
            Date_print(); 
        };
    </script>
</body>
</html>