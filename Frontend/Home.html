<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie Thumbnails</title>
    <link rel="stylesheet" href="style_home.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"> 
    <script src="https://cdn.jsdelivr.net/npm/vue@2"></script>
    <link rel="icon" href="faviconikona.ico" type="image/x-icon">
</head>
<body>



    <h2>
        <nav>
            <button onclick="location.href='http://localhost:3001/Login.html'">Login</button>
            <button onclick="location.href='http://localhost:3001/Register.html'">Register</button>
            <button onclick="location.href='http://localhost:3001/Checkout.html'">
                <i class="fas fa-shopping-cart icon"></i>
                Checkout
            </button>
        </nav>
    </h2>

    <!-- Ako je stisnut gumb filtriraj nemoj napraviti fetch movie api, nego napravi fetch filter api; else fetch movie api -->

    <h1>Movie Thumbnails</h1>
    <div id="app" class="movie-grid">
        <a v-for="movie in movies" :key="movie.ID" :href="'Player.html?id=' + movie.ID" class="movie-card">
            <img :src="movie.image" :alt="movie.movie" class="movie-image">
            <div class="movie-title">{{ movie.movie }}</div>
        </a>
    </div>

    <h1>Series Thumbnails</h1>
    <div id="series-app" class="series-grid">
        <a v-for="series in seriesList" :key="series.ID" :href="'Player.html?id=' + series.id" class="movie-card">
            <img :src="series.image" :alt="series.series" class="series-image">
            <div class="series-title">{{ series.series }}</div>
        </a>
    </div>

    <script>
        new Vue({
            el: '#app',
            data: {
                movies: [],
            },
            mounted() {
                this.fetchMovies();
            },
            methods: {
                fetchMovies() {
                    fetch('http://localhost:3001/api/movie')
                        .then(response => response.json())
                        .then(data => {
                            this.movies = data.map(movie => ({
                                ID: movie.ID,
                                movie: movie.movie,
                                producer: movie.producer,
                                year_mov: movie.year_mov,
                                category: movie.category,
                                image: movie.image 
                            }));
                        })
                        .catch(error => console.error('Error fetching movies:', error));
                }
            }
        });

        new Vue({
            el: '#series-app',
            data: {
                seriesList: [] 
            },
            mounted() {
                this.fetchSeries(); 
            },
            methods: {
                fetchSeries() {
                    fetch('http://localhost:3001/api/series') 
                        .then(response => response.json())
                        .then(data => {
                            this.seriesList = data.map(series => ({
                                id: series.id,
                                series: series.serie,
                                producer: series.producer,
                                year_mov: series.year_mov,
                                category: series.category,
                                image: series.image 
                            }));
                        })
                        .catch(error => console.error('Error fetching series:', error));
                }
            }
        });
    </script>
</body> 
</html>